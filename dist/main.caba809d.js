(self.webpackChunkmm_template=self.webpackChunkmm_template||[]).push([[179],{39652:function(e,t,n){"use strict";var a,s=n(85893),r=n(67294),i=n(73935),c=(n(15613),n(88391)),o=(n(19601),n(79655)),l=n(89250),d=n(29439),u=(n(26699),n(32023),n(82526),n(41817),n(94184)),m=n.n(u),p="left-aside-module--ci1QXjAW",h=function(){var e=(0,r.useState)(!0),t=(0,d.Z)(e,2),n=t[0],a=t[1],i=(0,l.TH)();return(0,r.useEffect)((function(){i.pathname.includes("task")&&(document.cookie.includes("ssouid=")||window.open("https://ant.design/components/message-cn#components-message-demo-hooks","_self")),window.ga&&window.ga("send","pageview")}),[i]),(0,r.useEffect)((function(){var e,t,n,a,s,r;e=window,t=document,n="script",a="ga",e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,s=t.createElement(n),r=t.getElementsByTagName(n)[0],s.async=1,s.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(s,r),ga("create","3109617390","auto"),ga("send","pageview")}),[]),(0,s.jsxs)("nav",Object.assign({className:m()("left-aside-module--O3_eO5bK",!n&&"left-aside-module--wwUXX0S1")},{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",Object.assign({className:"left-aside-module--di_pqQvH"},{children:"模型库"})),(0,s.jsx)("p",{children:(0,s.jsx)(o.OL,Object.assign({to:"/onnx-list",className:m()((i.pathname.includes("onnx")||"/"===i.pathname)&&p,"left-aside-module--Kv1vLjlb")},{children:n&&(0,s.jsx)("span",{children:"ONNX 通用模型"})}))}),(0,s.jsx)("p",{children:(0,s.jsx)(o.OL,Object.assign({to:"/hardware-list",className:m()(i.pathname.includes("hardware")&&p,"left-aside-module--OUYgmQFe")},{children:n&&(0,s.jsx)("span",{children:"设备专用模型"})}))}),(0,s.jsx)("div",{className:"left-aside-module--ICYq9DQZ"}),(0,s.jsx)("p",{children:(0,s.jsx)(o.OL,Object.assign({to:"/device-list",className:function(e){var t=e.isActive;return m()(t&&p,"left-aside-module--DVxnqNjV")}},{children:n&&(0,s.jsx)("span",{children:"设备列表"})}))}),(0,s.jsx)("p",{children:(0,s.jsx)(o.OL,Object.assign({to:"/task-convert-list",className:function(e){return e.isActive,m()(i.pathname.includes("task-convert")&&p,"left-aside-module--Efj9tdjq")}},{children:n&&(0,s.jsx)("span",{children:"模型转换"})}))}),(0,s.jsx)("p",{children:(0,s.jsx)(o.OL,Object.assign({to:"/task-profile-list",className:function(e){return e.isActive,m()(i.pathname.includes("task-profile")&&p,"left-aside-module--A1Iy543o")}},{children:n&&(0,s.jsx)("span",{children:"模型测速"})}))}),(0,s.jsx)("p",{children:(0,s.jsx)(o.OL,Object.assign({to:"/critic",className:function(e){var t=e.isActive;return m()(t&&p,"left-aside-module--knUw0zAf")}},{children:n&&(0,s.jsx)("span",{children:"硬件测评报告"})}))}),(0,s.jsx)("p",{children:(0,s.jsx)(o.OL,Object.assign({to:"/statistic",className:function(e){var t=e.isActive;return m()(t&&p,"left-aside-module--A1V2AQ_W")}},{children:n&&(0,s.jsx)("span",{children:"运行统计"})}))})]}),(0,s.jsxs)("div",Object.assign({className:"left-aside-module--A0rO1olY"},{children:[n&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",Object.assign({className:m()("left-aside-module--wsuWWBvW")},{children:"部署平台"})),(0,s.jsx)("span",Object.assign({className:m()("left-aside-module--M__VHz9l")},{children:"一键模型转换，真实硬件测评"}))]}),(0,s.jsx)("div",{className:"left-aside-module--neul1n0K",onClick:function(){a(!n)}})]}))]}))},f=function(e){var t=e.children;return(0,s.jsx)("div",Object.assign({className:"main-layout-module--wqKEB5BK"},{children:(0,s.jsxs)("div",Object.assign({className:"main-layout-module--wfdyUOGt"},{children:[(0,s.jsx)("div",Object.assign({className:"main-layout-module--ozUSBj7G"},{children:(0,s.jsx)(h,{})})),(0,s.jsx)("div",Object.assign({className:"main-layout-module--M_LNYbj2"},{children:t||(0,s.jsx)(l.j3,{})}))]}))}))},g=n.p+"assets/imgs/low-salary.de80db91.jpg",j=function(){return(0,s.jsx)("div",Object.assign({className:"greater-module--Mi0WF8m7"},{children:(0,s.jsx)("img",{src:g,width:"200"})}))},x=n(86896),v=function(){var e=(0,x.Z)();return(0,s.jsx)("div",{children:e.formatMessage({id:"hello",defaultMessage:"嗨"})})},b=function(){var e=(0,x.Z)();return(0,s.jsx)("div",{children:e.formatMessage({id:"hi",defaultMessage:"嗨"})})},_=(n(57483),n(50970)),w=(n(18028),n(26703)),k=(n(91574),n(48086)),O=n(64687),N=n.n(O),Z=(n(41539),n(88674),n(74916),n(15306),n(27207),n(21249),n(54747),n(47042),n(40561),{"onnx-wrap":"onnx-list-module--TYwoE5dk",onnxWrap:"onnx-list-module--TYwoE5dk","header-wrap":"onnx-list-module--u9Pmvp4r",headerWrap:"onnx-list-module--u9Pmvp4r",title:"onnx-list-module--Z5xyjQ7h",description:"onnx-list-module--aDuvfIsQ","header-search-input":"onnx-list-module--gi418BbH",headerSearchInput:"onnx-list-module--gi418BbH","content-wrap":"onnx-list-module--xswuiF5R",contentWrap:"onnx-list-module--xswuiF5R","footer-wrap":"onnx-list-module--Vay3WFHD",footerWrap:"onnx-list-module--Vay3WFHD","empty-wrap":"onnx-list-module--iby2M84M",emptyWrap:"onnx-list-module--iby2M84M",link:"onnx-list-module--LhD9TmuZ"}),y="card-module--ZxVurxwt",S=function(e){return(0,s.jsxs)("div",Object.assign({className:"card-module--gqmWCPqQ","data-id":e.id},{children:[(0,s.jsx)("span",Object.assign({className:"card-module--hlRH5d4P"},{children:e.name})),(0,s.jsx)("ul",Object.assign({className:"card-module--vY73k0vv"},{children:e.tags.map((function(e,t){return(0,s.jsx)("li",Object.assign({"data-tag":e},{children:e}),t)}))})),(0,s.jsxs)("div",Object.assign({className:"card-module--ypIj3CFf"},{children:[(0,s.jsx)("div",{className:m()(y,"card-module--acsD2KdD"),"data-icon":"github","data-url":e.train_config_url}),e.netronShow&&(0,s.jsx)("div",{className:m()(y,"card-module--IxXVy2FE"),"data-icon":"netron","data-id":e.id}),(0,s.jsx)("div",{className:m()(y,"card-module--LiEVQhnr"),"data-icon":"download","data-id":e.id})]}))]}))},C=n(9669),I=n.n(C),T=n(80129),E=n.n(T),A=(n(69826),n(27852),["/api/v1/user/register","/api/v1/user/login"]),P=[function(e){var t={};return A.find((function(t){return e.url.endsWith(t)}))||(t.Authorization="Bearer ".concat("token value")),Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers),t)})},function(e){return Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers),{"Client-Type":"app"})})}],W=[function(e){return e},function(e){var t=e.data,n=!e.__meta.isIgnoreError;return!1===t.success&&n&&k.ZP.error(t.msg),e},function(e){return e.data},function(e){return e.push&&e.push.join("")&&e.push.forEach((function(e){k.ZP.info(e)})),e}],z=[function(e){if(e.response){var t=e.response.status;console.log(e.response.data,"error....."),401===t||k.ZP.error("Service error")}return Promise.reject(e)}],M=(n(4723),n(82772),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.map((function(e){return"function"==typeof e?e:function(){return e}}));return function(){for(var e,t=0,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];for(e=0===a.length?s:a[t++].apply(a,s);t<a.length;)e=a[t++](e);return e}}),F="__Language_locale__",L=(a=window.localStorage.getItem(F))?"en-US"===a?"en-US":"zh-CN":(localStorage.setItem(F,"en-US"),"en-US"),V=function(e){var t,n,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(){t=this,n=arguments,a||(a=setTimeout((function(){e.apply(t,n),a=null}),s))}},q=function(){if(!document.cookie.match(/ssouid=(\S*)/))return"";var e=document.cookie.match(/ssouid=(\S*)/)[1];return e.indexOf(";")===e.length-1&&(e=e.substring(0,e.length-1)),e},B=function(e,t){if(!e)return"";if(e instanceof Array&&0===e.length)return"[]";var n=null,a="",s=0;return(t=t||{}).newlineAfterColonIfBeforeBraceOrBracket=!1!==t.newlineAfterColonIfBeforeBraceOrBracket,t.spaceAfterColon=!1!==t.spaceAfterColon,"string"==typeof e?e:(n=/([\{\}])/g,e=(e=JSON.stringify(e)).replace(n,"\r\n$1\r\n"),n=/([\[\]])/g,e=e.replace(n,"\r\n$1\r\n"),n=/(\,)/g,e=e.replace(n,"$1\r\n"),n=/(\r\n\r\n)/g,e=e.replace(n,"\r\n"),n=/\r\n\,/g,e=e.replace(n,","),t.newlineAfterColonIfBeforeBraceOrBracket||(n=/\:\r\n\{/g,e=e.replace(n,":{"),n=/\:\r\n\[/g,e=e.replace(n,":[")),t.spaceAfterColon&&(n=/\:/g,e=e.replace(n,": ")),e.split("\r\n").forEach((function(e,t){var n=0,r=0,i="";for(e.match(/\{$/)||e.match(/\[$/)?r=1:e.match(/\}/)||e.match(/\]/)?0!==s&&(s-=1):r=0,n=0;n<s;n++)i+="  ";a+=i+e+"\r\n",s+=r})),a.substring(2,a.length-4))};const U=I().create({method:"get",timeout:5e5,responseType:"json",paramsSerializer:e=>E().stringify(e,{indices:!1})}),D=new Map;W.unshift((e=>{let t={};return D.has(e.config.url)&&(t=D.get(e.config.url),D.delete(e.config.url)),{...e,__meta:t}}));const K=M(...P),H=M(...W),Q=M(...z);U.interceptors.request.use(K,(e=>Promise.reject(e))),U.interceptors.response.use(H,Q);const J=(e,t,n)=>{const a=`${e}`.replace(/\/\//g,"/");return t.meta&&(D.set(a,t.meta),delete t.meta),((e,{method:t="GET",params:n={},data:a={},...s})=>{const r=`/${e}`;switch(t.toLowerCase()){case"get":return U.get(r,{params:n,...s});case"delete":return U.delete(r,{params:n,data:a,...s});case"post":return U.post(r,a,{params:n,...s});case"put":return U.put(r,a,{params:n,...s});default:return Promise.resolve({then:e=>e({msgCode:300,msg:"method error",data:{}})})}})(a,t)};var Y=function(e){return J("v1/model/detail",{params:{modelid:e}})},R=function(e,t,n){return J("v1/model/onnx/list/tag",{params:{page_num:e,per_page:t,tag:n}})},X=function(e,t){return J("v1/model/download",{params:{userid:e,modelid:t}})},G=n(28721),$=function(e,t,n,a){return new(n||(n=Promise))((function(s,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))},ee=function(){var e=(0,l.s0)(),t=(0,r.useState)(q()?q():(0,G.Z)().replaceAll("-","")),n=(0,d.Z)(t,2),a=n[0],i=(n[1],(0,r.useState)({models:[],amount:0})),c=(0,d.Z)(i,2),o=c[0],u=c[1],p=(0,r.useState)(12),h=(0,d.Z)(p,2),f=h[0],g=h[1],j=(0,r.useState)({page_num:1,per_page:0}),x=(0,d.Z)(j,2),v=x[0],b=x[1],O=(0,r.useState)({amount:0,feedback_url:""}),y=(0,d.Z)(O,2),C=y[0],I=y[1],T=(0,r.useState)((0,l.TH)().state),E=(0,d.Z)(T,2),A=E[0],P=E[1],W=(0,r.useState)((0,l.TH)().state),z=(0,d.Z)(W,2),M=z[0],F=z[1],L=(0,r.useState)(""),B=(0,d.Z)(L,2),U=B[0],D=B[1],K=o.models.map((function(e,t){return(0,s.jsx)(S,{id:e.id,name:e.name,tags:e.tags,train_config_url:e.train_config_url,netronShow:!0},t)})),H=function(){F(A),D(""),b({page_num:1,per_page:v.per_page})},Q=function(e,t,n){return $(void 0,void 0,void 0,N().mark((function s(){var r,i,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if("github"!==e){s.next=3;break}return window.open(n),s.abrupt("return");case 3:return s.next=5,X(a,t).catch((function(e){return console.log(e)}));case 5:0===(r=s.sent).status?(i=r.data.download_url,"download"===e?((c=document.createElement("a")).href=i,document.body.append(c),c.click(),document.body.removeChild(c)):window.open("https://netron.app?url=".concat(i))):k.ZP.error(r.message);case 7:case"end":return s.stop()}}),s)})))},Y=function(e){e.models.forEach((function(e){if(e.tags&&e.tags.join("").length>33)for(var t=e.tags.length-1;t>=0;t--)if(e.tags.slice(0,t).join("").length<30)return void e.tags.splice(t,e.tags.length-t,"...")}))};return(0,r.useEffect)((function(){var e=function(){document.documentElement.getBoundingClientRect().width>1824?(g(16),b({page_num:v.page_num,per_page:16})):(g(12),b({page_num:v.page_num,per_page:12}))};window.addEventListener("resize",V(e)),$(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("v1/model/onnx/meta",{params:{}}).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&I(t.data);case 4:case"end":return e.stop()}}),e)}))),e()}),[]),(0,r.useEffect)((function(){v.per_page&&$(void 0,void 0,void 0,M?N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n=v.page_num,a=v.per_page,s=M,J("v1/model/onnx/search",{params:{page_num:n,per_page:a,sentence:s}})).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&(Y(t.data),u(t.data));case 4:case"end":return e.stop()}var n,a,s}),e)})):U?N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(v.page_num,v.per_page,U).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&(Y(t.data),u(t.data));case 4:case"end":return e.stop()}}),e)})):N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n=v.page_num,a=v.per_page,J("v1/model/onnx/list/all",{params:{page_num:n,per_page:a}})).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&(Y(t.data),u(t.data));case 4:case"end":return e.stop()}var n,a}),e)})))}),[U,v.page_num,v.per_page,M]),(0,s.jsxs)("div",Object.assign({className:Z.onnxWrap},{children:[(0,s.jsxs)("div",Object.assign({className:Z.headerWrap},{children:[(0,s.jsxs)("div",Object.assign({className:Z.headerLeft},{children:[(0,s.jsx)("span",Object.assign({className:Z.title},{children:"ONNX 通用模型"})),(0,s.jsxs)("span",Object.assign({className:Z.description},{children:[o.amount," 个模型"]}))]})),(0,s.jsx)(w.Z,{placeholder:"搜一搜模型名称或标签",className:m()(Z.headerSearchInput,"search-input"),onPressEnter:H,onChange:function(e){P(e.target.value)},value:A,addonAfter:(0,s.jsx)("div",{onClick:H})})]})),(0,s.jsx)("div",Object.assign({className:Z.contentWrap},{children:(0,s.jsx)("div",Object.assign({onClick:function(t){for(var n=t.target;n;){var a=n.dataset.tag;if(a){console.log("tag",a),b({page_num:1,per_page:v.per_page}),P(""),F(""),D(a);break}var s=n.dataset.icon;if(s){Q(s,n.dataset.id,n.dataset.url);break}var r=n.dataset.id;if(r){e("/onnx-detail",{state:r});break}n=n.parentElement}}},{children:K}))})),o.amount>0&&(0,s.jsxs)("div",Object.assign({className:Z.footerWrap},{children:[(0,s.jsx)("a",Object.assign({className:Z.link,href:C.feedback_url,target:"_blank"},{children:"没找到想要的模型？"})),(0,s.jsx)(_.Z,{showQuickJumper:!0,showSizeChanger:!0,total:o.amount,current:v.page_num,onChange:function(e,t){b({page_num:e,per_page:t})},showTotal:function(e){return"共 ".concat(e," 条")},pageSizeOptions:[f,2*f,3*f,4*f],pageSize:v.per_page})]})),!o.amount&&(0,s.jsxs)("div",Object.assign({className:Z.emptyWrap},{children:[(0,s.jsx)("span",{children:"无搜索结果，换个关键词试试"}),(0,s.jsx)("a",Object.assign({className:Z.link,href:C.feedback_url,target:"_blank"},{children:"没找到想要的模型？"}))]}))]}))},te=(n(18625),n(35247)),ne="onnx-detail-module--uiO7WVdA",ae="onnx-detail-module--Lze5Mjq6",se="onnx-detail-module--zHa7EfzF",re=function(e,t,n,a){return new(n||(n=Promise))((function(s,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))},ie=function(){var e=(0,l.s0)(),t=(0,r.useState)({name:"vision-transformer",id:87,tags:["mmcls","imagenet-1k","snpe"],updated_at:"2022-01-01 11:30",train_config_url:"https://github.com/open-mmlab/mmclassification/blob/master/configs/vision_transformer/vit-base-p16_ft-4xb544-ipu_in1k.py",pth_url:"https://download.openmmlab.com/mmclassification/v0/resnet/resnet34_b16x8_cifar10_20210528-a8aa36a6.pth",download_url:"https://deploee.oss-cn-shanghai.aliyuncs.com/resnet18.tar",preprocess:'{\n"mean": 127.5}',postprocess:"https://github.com/",backward_param:["mAP 50","mIOU 78"],forward_param:["200M macc","单线程 14ms on RK3399"]}),n=(0,d.Z)(t,2),a=n[0],i=n[1],c=(0,r.useState)((0,l.TH)().state),u=(0,d.Z)(c,2),p=u[0],h=(u[1],(0,r.useState)(q()?q():(0,G.Z)().replaceAll("-",""))),f=(0,d.Z)(h,2),g=f[0];f[1],(0,r.useEffect)((function(){re(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(p).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&i(t.data);case 4:case"end":return e.stop()}}),e)})))}),[]);var j=function(){return e("/onnx-list",{state:document.getElementById("searchInput").value})};return(0,s.jsxs)("section",Object.assign({className:"onnx-detail-module--eHmq1fZK"},{children:[(0,s.jsxs)("header",Object.assign({className:"onnx-detail-module--QQetCF6D"},{children:[(0,s.jsxs)(te.Z,{children:[(0,s.jsx)(te.Z.Item,{children:(0,s.jsx)(o.rU,Object.assign({to:"/onnx-list"},{children:"ONNX 通用模型"}))}),(0,s.jsx)(te.Z.Item,{children:"模型详情"})]}),(0,s.jsx)(w.Z,{id:"searchInput",placeholder:"搜一搜模型名称或标签",className:m()("onnx-detail-module--S9B5fhzh","search-input"),onPressEnter:j,addonAfter:(0,s.jsx)("div",{onClick:j})})]})),(0,s.jsxs)("main",Object.assign({className:"onnx-detail-module--bdTdpPZ_"},{children:[(0,s.jsxs)("div",Object.assign({className:"onnx-detail-module--gsQPgHOm"},{children:[(0,s.jsxs)("div",Object.assign({className:"onnx-detail-module--ZtawSSsr"},{children:[(0,s.jsx)("span",Object.assign({className:"onnx-detail-module--Kk8ar0PV"},{children:a.name})),(0,s.jsx)("span",Object.assign({className:"onnx-detail-module--ZewGK2on",onClick:function(){return re(void 0,void 0,void 0,N().mark((function e(){var t,n,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(g,p).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status?(n=t.data.download_url,(a=document.createElement("a")).href=n,document.body.append(a),a.click(),document.body.removeChild(a)):k.ZP.error(t.message);case 4:case"end":return e.stop()}}),e)})))}},{children:"下载模型"}))]})),(0,s.jsx)("ul",Object.assign({className:"onnx-detail-module--jlYGq7v4"},{children:a.tags.map((function(e){return(0,s.jsx)("li",{children:e},e)}))})),(0,s.jsxs)("div",Object.assign({className:"onnx-detail-module--VkwwMSAJ"},{children:["更新时间 ",a.updated_at]}))]})),(0,s.jsx)("span",Object.assign({className:ne},{children:"模型训练配置"})),(0,s.jsx)("a",Object.assign({className:ae},{children:a.train_config_url})),(0,s.jsx)("span",Object.assign({className:ne},{children:"pth 权重路径"})),(0,s.jsx)("a",Object.assign({className:ae},{children:a.pth_url})),(0,s.jsx)("span",Object.assign({className:ne},{children:"模型预处理"})),(0,s.jsx)("pre",Object.assign({className:se},{children:B(a.preprocess,null)})),(0,s.jsx)("span",Object.assign({className:ne},{children:"模型后处理"})),(0,s.jsx)("pre",Object.assign({className:se},{children:B(a.postprocess,null)})),(0,s.jsx)("span",Object.assign({className:ne},{children:"推理参数"})),(0,s.jsx)("pre",Object.assign({className:se},{children:B(a.forward_param,null)})),(0,s.jsx)("span",Object.assign({className:ne},{children:"训练参数"})),(0,s.jsx)("pre",Object.assign({className:se},{children:B(a.backward_param,null)}))]}))]}))},ce=(n(72374),n(8834)),oe={"onnx-wrap":"hardware-list-module--lt1TKInM",onnxWrap:"hardware-list-module--lt1TKInM","header-wrap":"hardware-list-module--tpyP42av",headerWrap:"hardware-list-module--tpyP42av",title:"hardware-list-module--H1YbsjK5",description:"hardware-list-module--og2wccnr","header-search-input":"hardware-list-module--oA4EKDVp",headerSearchInput:"hardware-list-module--oA4EKDVp",hardwareSelect:"hardware-list-module--rMlNx497","content-wrap":"hardware-list-module--bUzqBzhT",contentWrap:"hardware-list-module--bUzqBzhT","footer-wrap":"hardware-list-module--pBMWuTKa",footerWrap:"hardware-list-module--pBMWuTKa",link:"hardware-list-module--ovN8qRSL","empty-wrap":"hardware-list-module--PJ0b4EPz",emptyWrap:"hardware-list-module--PJ0b4EPz"},le=function(){return J("v1/device/list/convert",{})},de=function(e,t,n,a){return J("v1/model/hardware/list/tag",{params:{runtime:e,page_num:t,per_page:n,tag:a}})},ue=function(e,t,n,a){return new(n||(n=Promise))((function(s,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))},me=function(){var e=(0,r.useState)(q()?q():(0,G.Z)().replaceAll("-","")),t=(0,d.Z)(e,2),n=t[0],a=(t[1],(0,r.useState)({models:[],amount:0})),i=(0,d.Z)(a,2),c=i[0],o=i[1],u=(0,r.useState)(12),p=(0,d.Z)(u,2),h=p[0],f=p[1],g=(0,r.useState)({page_num:1,per_page:12}),j=(0,d.Z)(g,2),x=j[0],v=j[1],b=(0,r.useState)({feedback_url:""}),O=(0,d.Z)(b,2),Z=O[0],y=O[1],C=(0,r.useState)([]),I=(0,d.Z)(C,2),T=I[0],E=I[1],A=(0,r.useState)(),P=(0,d.Z)(A,2),W=P[0],z=P[1],M=(0,r.useState)(""),F=(0,d.Z)(M,2),L=F[0],B=F[1],U=(0,r.useState)(""),D=(0,d.Z)(U,2),K=D[0],H=D[1],Q=(0,r.useState)(""),Y=(0,d.Z)(Q,2),R=Y[0],$=Y[1],ee=c.models.map((function(e,t){return(0,s.jsx)(S,{id:e.id,name:e.name,tags:e.tags,netronShow:!1,train_config_url:e.train_config_url},t)})),te=(0,l.s0)(),ne=function(e,t,a){return ue(void 0,void 0,void 0,N().mark((function s(){var r,i,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if("github"!==e){s.next=3;break}return window.open(a),s.abrupt("return");case 3:return s.next=5,X(n,t).catch((function(e){return console.log(e)}));case 5:0===(r=s.sent).status?(i=r.data.download_url,(c=document.createElement("a")).href=i,document.body.append(c),c.click(),document.body.removeChild(c)):k.ZP.error(r.message);case 7:case"end":return s.stop()}}),s)})))},ae=function(){$(""),H(L),v({page_num:1,per_page:x.per_page})},se=function(){document.documentElement.getBoundingClientRect().width>1824?(f(16),v({page_num:x.page_num,per_page:16})):(f(12),v({page_num:x.page_num,per_page:12}))};return(0,r.useEffect)((function(){window.addEventListener("resize",V(se)),se(),ue(void 0,void 0,void 0,N().mark((function e(){var t,n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le().catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&(n=t.data.map((function(e){return{value:e.name,label:e.name}})),z(n[0].value),E(n));case 4:case"end":return e.stop()}}),e)}))),ue(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("v1/model/hardware/meta",{}).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&y(t.data);case 4:case"end":return e.stop()}}),e)})))}),[]),(0,r.useEffect)((function(){W&&ue(void 0,void 0,void 0,K?N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n=W,a=K,s=x.page_num,r=x.per_page,J("v1/model/hardware/search",{params:{runtime:n,sentence:a,page_num:s,per_page:r}})).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&o(t.data);case 4:case"end":return e.stop()}var n,a,s,r}),e)})):R?N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(W,x.page_num,x.per_page,R).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&o(t.data);case 4:case"end":return e.stop()}}),e)})):N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n=W,a=x.page_num,s=x.per_page,J("v1/model/hardware/list/all",{params:{runtime:n,page_num:a,per_page:s}})).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&o(t.data);case 4:case"end":return e.stop()}var n,a,s}),e)})))}),[W,x.page_num,x.per_page,K,R]),(0,s.jsxs)("div",Object.assign({className:oe.onnxWrap},{children:[(0,s.jsxs)("div",Object.assign({className:oe.headerWrap},{children:[(0,s.jsxs)("div",Object.assign({className:oe.headerLeft},{children:[(0,s.jsx)("span",Object.assign({className:oe.title},{children:"设备专用模型"})),(0,s.jsxs)("span",Object.assign({className:oe.description},{children:[c.amount," 个模型"]}))]})),(0,s.jsxs)("div",{children:[(0,s.jsx)(ce.Z,{value:W,className:oe.hardwareSelect,style:{width:220},options:T,onChange:function(e){z(e),$(""),v({page_num:1,per_page:x.per_page})}}),(0,s.jsx)(w.Z,{placeholder:"搜一搜模型名称或标签",className:m()(oe.headerSearchInput,"search-input"),onPressEnter:ae,value:L,onChange:function(e){B(e.target.value)},addonAfter:(0,s.jsx)("div",{onClick:ae})})]})]})),(0,s.jsx)("div",Object.assign({className:oe.contentWrap},{children:(0,s.jsx)("div",Object.assign({onClick:function(e){for(var t=e.target;t;){var n=t.dataset.tag;if(n){$(n),v({page_num:1,per_page:x.per_page}),B(""),H("");break}var a=t.dataset.icon;if(a){ne(a,t.dataset.id,t.dataset.url);break}var s=t.dataset.id;if(s){te("/hardware-detail",{state:s});break}t=t.parentElement}}},{children:ee}))})),c.amount>0&&(0,s.jsxs)("div",Object.assign({className:oe.footerWrap},{children:[(0,s.jsx)("a",Object.assign({className:oe.link,href:Z.feedback_url,target:"_blank"},{children:"没找到想要的模型？"})),(0,s.jsx)(_.Z,{showQuickJumper:!0,showSizeChanger:!0,current:x.page_num,total:c.amount,onChange:function(e,t){v({page_num:e,per_page:t})},showTotal:function(e){return"共 ".concat(e," 条")},pageSizeOptions:[h,2*h,3*h,4*h],pageSize:x.per_page})]})),!c.amount&&(0,s.jsx)("div",Object.assign({className:oe.emptyWrap},{children:"无搜索结果，换个关键词试试"}))]}))},pe="hardware-detail-module--d7uz8XCp",he="hardware-detail-module--ZH6HQuxt",fe="hardware-detail-module--sb0_896I",ge=function(e,t,n,a){return new(n||(n=Promise))((function(s,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))},je=function(){var e=(0,r.useState)({name:"vision-transformer",id:87,tags:["mmcls","imagenet-1k","snpe"],updated_at:"2022-01-01 11:30",train_config_url:"https://github.com/open-mmlab/mmclassification/blob/master/configs/vision_transformer/vit-base-p16_ft-4xb544-ipu_in1k.py",pth_url:"https://download.openmmlab.com/mmclassification/v0/resnet/resnet34_b16x8_cifar10_20210528-a8aa36a6.pth",download_url:"https://deploee.oss-cn-shanghai.aliyuncs.com/resnet18.tar",preprocess:'{\n"mean": 127.5}',postprocess:"https://github.com/",backward_param:["mAP 50","mIOU 78"],forward_param:["200M macc","单线程 14ms on RK3399"]}),t=(0,d.Z)(e,2),n=t[0],a=t[1],i=(0,r.useState)((0,l.TH)().state),c=(0,d.Z)(i,2),u=c[0],m=(c[1],(0,r.useState)(q()?q():(0,G.Z)().replaceAll("-",""))),p=(0,d.Z)(m,2),h=p[0];return p[1],(0,r.useEffect)((function(){ge(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(u).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&a(t.data);case 4:case"end":return e.stop()}}),e)})))}),[]),(0,s.jsxs)("section",Object.assign({className:"hardware-detail-module--lHBO1LCk"},{children:[(0,s.jsx)("header",Object.assign({className:"hardware-detail-module--lcjIpit0"},{children:(0,s.jsxs)(te.Z,{children:[(0,s.jsx)(te.Z.Item,{children:(0,s.jsx)(o.rU,Object.assign({to:"/hardware-list"},{children:"设备专用模型"}))}),(0,s.jsx)(te.Z.Item,{children:"模型详情"})]})})),(0,s.jsxs)("main",Object.assign({className:"hardware-detail-module--RDS5wXbt"},{children:[(0,s.jsxs)("div",Object.assign({className:"hardware-detail-module--KZ641Rt8"},{children:[(0,s.jsxs)("div",Object.assign({className:"hardware-detail-module--vYrEA2YS"},{children:[(0,s.jsx)("span",Object.assign({className:"hardware-detail-module--QiYYzG22"},{children:n.name})),(0,s.jsx)("span",Object.assign({className:"hardware-detail-module--zqEDDX8W",onClick:function(){return ge(void 0,void 0,void 0,N().mark((function e(){var t,n,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(h,u).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status?(n=t.data.download_url,(a=document.createElement("a")).href=n,document.body.append(a),a.click(),document.body.removeChild(a)):k.ZP.error(t.message);case 4:case"end":return e.stop()}}),e)})))}},{children:"下载模型"}))]})),(0,s.jsx)("ul",Object.assign({className:"hardware-detail-module--bjLiNhho"},{children:n.tags.map((function(e){return(0,s.jsx)("li",{children:e},e)}))})),(0,s.jsxs)("div",Object.assign({className:"hardware-detail-module--IYfLRWtn"},{children:["更新时间 ",n.updated_at]}))]})),(0,s.jsx)("span",Object.assign({className:pe},{children:"模型训练配置"})),(0,s.jsx)("a",Object.assign({className:he},{children:n.train_config_url})),(0,s.jsx)("span",Object.assign({className:pe},{children:"pth 权重路径"})),(0,s.jsx)("a",Object.assign({className:he},{children:n.pth_url})),(0,s.jsx)("span",Object.assign({className:pe},{children:"模型预处理"})),(0,s.jsx)("pre",Object.assign({className:fe},{children:B(n.preprocess,null)})),(0,s.jsx)("span",Object.assign({className:pe},{children:"模型后处理"})),(0,s.jsx)("pre",Object.assign({className:fe},{children:B(n.postprocess,null)})),(0,s.jsx)("span",Object.assign({className:pe},{children:"推理参数"})),(0,s.jsx)("pre",Object.assign({className:fe},{children:B(n.forward_param,null)})),(0,s.jsx)("span",Object.assign({className:pe},{children:"训练参数"})),(0,s.jsx)("pre",Object.assign({className:fe},{children:B(n.backward_param,null)}))]}))]}))},xe=(n(92545),n(50524)),ve=(n(92222),"device-list-module--ZUAOmDzG"),be=function(e,t,n,a){return new(n||(n=Promise))((function(s,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))},_e=function(){var e=(0,r.useState)({devices:[],amount:0}),t=(0,d.Z)(e,2),n=t[0],a=t[1],i=(0,r.useState)({page_num:1,per_page:10}),c=(0,d.Z)(i,2),o=c[0],l=c[1],u=(0,r.useState)({feedback_url:"https://github.com/",notification:""}),m=(0,d.Z)(u,2),p=m[0],h=m[1],f=(0,r.useState)(!0),g=(0,d.Z)(f,2),j=g[0],x=g[1],v=[{title:"编号",width:107,render:function(e,t,n){return n+1+(o.page_num-1)*o.per_page}},{title:"名称",width:188,dataIndex:"name"},{title:"类型",width:188,dataIndex:"productname"},{title:"runtime",width:240,render:function(e,t,n){return(0,s.jsx)("div",Object.assign({className:"device-list-module--eykOdILB"},{children:t.runtime}))}},{title:"用途",width:134,dataIndex:"usage"},{title:"状态",width:139,render:function(e,t,n){var a="",r="";return t.is_online?(a="device-list-module--xRhDITwe",r="在线"):(a="device-list-module--XQP1Jxa0",r="不在线"),(0,s.jsxs)("div",Object.assign({className:"device-list-module--PBgAEtlC"},{children:[(0,s.jsx)("span",{className:"".concat("device-list-module--dCK7GZQd"," ").concat(a)}),(0,s.jsx)("span",{children:r})]}))}},{title:"排队中的任务",width:140,dataIndex:"queue_length"}];return(0,r.useEffect)((function(){be(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("v1/device/meta",{}).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&h(t.data);case 4:case"end":return e.stop()}}),e)})))}),[]),(0,r.useEffect)((function(){be(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n=o.page_num,s=o.per_page,J("v1/device/list/all",{params:{page_num:n,per_page:s}})).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&a(t.data);case 4:case"end":return e.stop()}var n,s}),e)})))}),[o.page_num,o.per_page]),(0,s.jsxs)("section",Object.assign({className:ve},{children:[(0,s.jsxs)("header",Object.assign({className:"device-list-module--tSCVucM5"},{children:["设备列表",j&&p.notification&&(0,s.jsxs)("div",Object.assign({className:"device-list-module--DvEyaH2i"},{children:[p.notification,(0,s.jsx)("span",{className:"device-list-module--AyzHm1se",onClick:function(){return x(!1)}})]}))]})),(0,s.jsx)("main",Object.assign({className:"device-list-module--rnqy1J09"},{children:(0,s.jsxs)("div",Object.assign({className:"device-list-module--U3J4w4i0"},{children:[(0,s.jsx)(xe.Z,{rowKey:"id",dataSource:n.devices,columns:v,pagination:{current:o.page_num,pageSize:o.per_page,total:n.amount,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(e,t){console.log(e,t),l({page_num:e,per_page:t})}},scroll:{y:600}}),(0,s.jsx)("a",Object.assign({className:"device-list-module--ArW61pG9",href:p.feedback_url,target:"_blank"},{children:"如何贡献我的设备？"}))]}))}))]}))},we=(n(14614),n(82762)),ke=(n(38342),n(48889)),Oe={display_flex:"task-convert-list-module--uTFJZgP4",displayFlex:"task-convert-list-module--uTFJZgP4",flexDirection_column:"task-convert-list-module--NcNfGWbN",flexDirectionColumn:"task-convert-list-module--NcNfGWbN",alignItems_center:"task-convert-list-module--AnVjwCXY",alignItemsCenter:"task-convert-list-module--AnVjwCXY",justifyContent_spaceBetween:"task-convert-list-module--Espm4nDu",justifyContentSpaceBetween:"task-convert-list-module--Espm4nDu","fd-ml24":"task-convert-list-module--b0xX6nKP",fdMl24:"task-convert-list-module--b0xX6nKP","task-convert-list":"task-convert-list-module--p9DuEWwl",taskConvertList:"task-convert-list-module--p9DuEWwl","task-convert-list-header":"task-convert-list-module--hGelOEpe",taskConvertListHeader:"task-convert-list-module--hGelOEpe","task-convert-list-main":"task-convert-list-module--m2Se1PLj",taskConvertListMain:"task-convert-list-module--m2Se1PLj","rw-count":"task-convert-list-module--QP_8JrEU",rwCount:"task-convert-list-module--QP_8JrEU","icon-question":"task-convert-list-module--cURWB809",iconQuestion:"task-convert-list-module--cURWB809",zt:"task-convert-list-module--ZYuiToHK",success:"task-convert-list-module--bLl3U4XD",processing:"task-convert-list-module--fCnd46aW",fail:"task-convert-list-module--jqcazF1O",reconnecting:"task-convert-list-module--MQb0SqrJ",wait_in_queue:"task-convert-list-module--dN5VLmds",waitInQueue:"task-convert-list-module--dN5VLmds",canceled:"task-convert-list-module--r5E9nM1c","fd-button":"task-convert-list-module--V7CspOsn",fdButton:"task-convert-list-module--V7CspOsn","fd-a":"task-convert-list-module--t0ZVvou5",fdA:"task-convert-list-module--t0ZVvou5",error:"task-convert-list-module--V5xXc4Jg",disabled:"task-convert-list-module--r3hvtG3D","fd-pos-r":"task-convert-list-module--soPdZoGx",fdPosR:"task-convert-list-module--soPdZoGx","fd-link":"task-convert-list-module--h4_Wsvx0",fdLink:"task-convert-list-module--h4_Wsvx0","fd-empty-text":"task-convert-list-module--OSohOrRl",fdEmptyText:"task-convert-list-module--OSohOrRl"},Ne=function(e,t,n){return J("v1/task/convert/list",{params:{page_num:e,per_page:t,userid:n}})},Ze=function(e,t){return J("v1/task/convert/download",{userid:e,taskid:t})},ye=function(e,t){return J("v1/task/cancel",{method:"post",data:{userid:e,taskid:t}})},Se=function(e,t){return J("v1/task/detail",{params:{userid:e,taskid:t}})},Ce=function(e){return J("v1/task/convert/submit",{method:"post",data:e})},Ie=function(e,t,n){return J("v1/task/profile/list",{params:{page_num:e,per_page:t,userid:n}})},Te=function(e){return J("v1/common/quota",{params:{userid:e}})},Ee=function(){return J("v1/common/codebase",{})},Ae=function(e,t){return J("v1/common/config2pth",{params:{codebase:e,config_path:t}})},Pe=function(e,t){return J("v1/common/upload/".concat(e),{method:"post",data:t})},We=function(e,t,n,a){return new(n||(n=Promise))((function(s,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))},ze=ke.Z.confirm,Me=function(){var e=(0,l.s0)(),t=(0,r.useState)({tasks:[],amount:0}),n=(0,d.Z)(t,2),a=n[0],i=n[1],c=function(){return e("/add-task-convert")},o=(0,r.useState)(!1),u=(0,d.Z)(o,2),m=u[0],p=u[1],h=(0,r.useState)(""),f=(0,d.Z)(h,2),g=f[0],j=f[1],x={5:"success",6:"fail",3:"processing",1:"reconnecting",4:"canceled",0:"wait_in_queue"},v=[{title:"编号",width:140,render:function(e,t,n){return(0,s.jsxs)("div",{children:[n+1+(w.page_num-1)*w.per_page,(0,s.jsx)("a",Object.assign({className:"".concat(Oe.fdA," ").concat(Oe.fdMl24),onClick:function(){return function(e){return We(void 0,void 0,void 0,N().mark((function t(){var n,a,s,r,i,c,o;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se(E,e.id).catch((function(e){return console.log(e)}));case 2:0===(a=t.sent).status&&(s=a.data,r=JSON.stringify(s),i=String(Date.now()),(c=null===(n=r.match(/"{.+}"/g))||void 0===n?void 0:n[0])&&(r=JSON.stringify(s).replace(c,i)),o="&nbsp;&nbsp;&nbsp;&nbsp;",r=r.replace(/{/g,"{<br>".concat(o)).replace(/}/g,"<br>}").replace(/,/g,",<br>".concat(o)),c&&(r=r.replace(i,c)),j(r),p(!0));case 4:case"end":return t.stop()}}),t)})))}(t)}},{children:"查看参数"}))]})}},{title:"目标设备",width:337,dataIndex:"device_name"},{title:"状态",width:139,render:function(e,t,n){return(0,s.jsxs)("div",Object.assign({className:"".concat(Oe.display_flex," ").concat(Oe.alignItems_center)},{children:[(0,s.jsx)("span",{className:"".concat(Oe.zt," ").concat(Oe[x[t.state_code]])}),(0,s.jsx)("span",{children:t.state_text})]}))}},{title:"创建时间",width:180,dataIndex:"create_time"},{title:"执行时间",width:140,dataIndex:"execute_time",render:function(e,t,n){return t.execute_time?t.execute_time:"-"}},{title:"操作",width:200,render:function(e,t,n){return t.cancel_enable?(0,s.jsx)("a",Object.assign({className:"".concat(Oe.fdA," ").concat(Oe.error),onClick:function(){return e=t.id,void ze({className:"fd-confirm_cancel",title:(0,s.jsx)("span",Object.assign({className:""},{children:"确定要取消此任务吗？"})),icon:"",content:"取消后任务将不可恢复",cancelText:"暂不取消",okText:"取消",onOk:function(){!function(e,t){We(void 0,void 0,void 0,N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ye(E,e).catch((function(e){return console.log(e)}));case 2:0===t.sent.status?(k.ZP.info("任务取消成功"),P(),A()):k.ZP.error("任务取消失败");case 4:case"end":return t.stop()}}),t)})))}(e)},onCancel:function(){console.log("Cancel")}});var e}},{children:"取消"})):t.download_model_enable?(0,s.jsx)("a",Object.assign({className:Oe.fdA,onClick:function(){return e=t.id,We(void 0,void 0,void 0,N().mark((function t(){var n,a,s,r;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ze(E,e).catch((function(e){return console.log(e)}));case 2:if(0===(n=t.sent).status)for(a=0;a<n.data.length;a++)s=n.data[a].download_url,(r=document.createElement("iframe")).setAttribute("id",s),r.setAttribute("src",s),document.body.appendChild(r),r.style.display="none";else k.ZP.error("下载模型失败");case 4:case"end":return t.stop()}}),t)})));var e}},{children:"下载模型"})):t.download_error_enable?(0,s.jsx)("a",Object.assign({className:Oe.fdA,onClick:function(){return e=t.download_error_url,(n=document.createElement("a")).href=e,document.body.append(n),n.click(),void document.body.removeChild(n);var e,n}},{children:"错误日志"})):(0,s.jsx)("a",Object.assign({className:"".concat(Oe.fdA," ").concat(Oe.disabled)},{children:"-"}))}}],b=(0,r.useState)({page_num:1,per_page:10}),_=(0,d.Z)(b,2),w=_[0],O=_[1],Z=(0,r.useState)({max:0,use:0,available:0}),y=(0,d.Z)(Z,2),S=y[0],C=y[1],I=(0,r.useState)(q()),T=(0,d.Z)(I,2),E=T[0],A=(T[1],function(){return We(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(w.page_num,w.per_page,E).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&i(t.data);case 4:case"end":return e.stop()}}),e)})))}),P=function(){return We(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(E).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&C(t.data);case 4:case"end":return e.stop()}}),e)})))};return(0,r.useEffect)((function(){P()}),[]),(0,r.useEffect)((function(){A()}),[w.page_num,w.per_page]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("section",Object.assign({className:Oe.taskConvertList},{children:[(0,s.jsxs)("header",Object.assign({className:Oe.taskConvertListHeader},{children:["模型转换",(0,s.jsxs)("div",Object.assign({className:"".concat(Oe.display_flex," ").concat(Oe.alignItems_center)},{children:[(0,s.jsxs)("span",Object.assign({className:Oe.rwCount},{children:["进行中任务",S.use,"/",S.max]})),(0,s.jsx)(we.Z,Object.assign({placement:"top",title:"仅允许同时提交 ".concat(S.max," 个转换或测速任务，当前 ").concat(S.use," 个；可取消等待中任务空出额度")},{children:(0,s.jsx)("span",{className:Oe.iconQuestion})})),(0,s.jsx)("button",Object.assign({disabled:S.max===S.use,className:"".concat(Oe.fdButton," ").concat(Oe.fdMl24),onClick:function(){return c()}},{children:"新建转换任务"}))]}))]})),(0,s.jsx)("main",Object.assign({className:Oe.taskConvertListMain},{children:(0,s.jsx)("div",Object.assign({className:Oe.fdPosR},{children:(0,s.jsx)(xe.Z,{className:"hover-color-table",rowKey:"id",locale:{emptyText:(0,s.jsxs)("div",Object.assign({className:Oe.fdEmptyText},{children:["还未提交过转换任务，快去 ",(0,s.jsx)("a",Object.assign({className:Oe.fdA,onClick:function(){return c()}},{children:"新建"}))," 吧"]}))},dataSource:a.tasks,columns:v,pagination:{current:w.page_num,pageSize:w.per_page,total:a.amount,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(e,t){O({page_num:e,per_page:t})}},scroll:{y:550}})}))}))]})),(0,s.jsx)(ke.Z,Object.assign({title:"部署配置参数",open:m,footer:null,onCancel:function(){return p(!1)},wrapClassName:"config-modal-wrap"},{children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:g}})}))]})},Fe=(n(36727),n(59314)),Le=(n(22764),n(50537)),Ve=n(4942),qe=(n(24293),n(87050)),Be=(n(9653),n(39714),"add-task-convert-module--W9X0a18h"),Ue="add-task-convert-module--SAoTymyM",De="add-task-convert-module--xpSnLU5Y",Ke="add-task-convert-module--aWQuBCJy",He="add-task-convert-module--PSjBC3C3",Qe="add-task-convert-module--VsKLh6Oh",Je="add-task-convert-module--Jkf2VPro",Ye="add-task-convert-module--TogDx0MA",Re="add-task-convert-module--bvorCyic",Xe=function(){return J("v1/statistic/oss",{})},Ge=function(e,t,n,a){return new(n||(n=Promise))((function(s,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))},$e=ce.Z.Option,et=w.Z.TextArea,tt={labelCol:{span:5},wrapperCol:{span:19}},nt={pth_url:{accept:[".pth"],size:400},test_data:{accept:[".jpg",".png",".yuv",".bmp",".npy",".bin",".mp4",".avi"],size:10}},at=function(){var e=(0,l.s0)(),t=(0,r.useState)(q()),n=(0,d.Z)(t,2),a=n[0],i=(n[1],qe.Z.useForm()),c=(0,d.Z)(i,1)[0],u=(0,r.useState)([]),p=(0,d.Z)(u,2),h=p[0],f=p[1];(0,r.useEffect)((function(){Ge(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee().catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&t.data.length>0&&(f(t.data),c.setFieldValue("codebase",t.data[0].name),X(t.data[0]));case 4:case"end":return e.stop()}}),e)})))}),[]);var g=(0,r.useState)([]),j=(0,d.Z)(g,2),x=j[0],v=j[1];(0,r.useEffect)((function(){Ge(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le().catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&t.data.length>0&&(v(t.data),c.setFieldValue("runtime",t.data[0].name));case 4:case"end":return e.stop()}}),e)})))}),[]);var b=(0,r.useState)({sdk_explanation:"",input_shape_explanation:""}),_=(0,d.Z)(b,2),O=_[0],Z=_[1];(0,r.useEffect)((function(){Ge(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("v1/task/convert/meta",{}).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&Z(t.data);case 4:case"end":return e.stop()}}),e)})))}),[]);var y=(0,r.useState)({pth_url:{error:""},test_data:{error:""}}),S=(0,d.Z)(y,2),C=S[0],I=S[1],T=(0,r.useState)(!1),E=(0,d.Z)(T,2),A=E[0],P=E[1],W=(0,r.useState)(""),z=(0,d.Z)(W,2),M=z[0],F=z[1],L=(0,r.useState)({totalTime:0,restTime:0}),V=(0,d.Z)(L,2),B=V[0],U=V[1],D=function(e,t,n){return Ge(void 0,void 0,void 0,N().mark((function s(){var r,i,o,l,d,u;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if("pth_url"!==e){s.next=12;break}return s.next=3,Xe().catch((function(e){return console.log(e)}));case 3:if(0!==(r=s.sent).status){s.next=10;break}i=r.data.upload_bytes_per_second,o=Number((t.size/i).toFixed(0)),U({totalTime:o,restTime:o}),s.next=12;break;case 10:return k.ZP.error(r.message),s.abrupt("return");case 12:if(l=nt[e].size,!(t.size>1024*l*1024)){s.next=17;break}return I(Object.assign(Object.assign({},C),(0,Ve.Z)({},e,{error:"文件大小超过".concat(l,"M")}))),c.validateFields([e]),s.abrupt("return",!1);case 17:return(d=new FormData).append("userid",a),d.append(n,t),d.append("bytesize",t.size.toString()),s.next=23,Pe(n,d).catch((function(e){return console.log(e)}));case 23:return u=s.sent,"pth_url"===e&&U({totalTime:0,restTime:0}),0===u.status?(c.setFieldValue(e,u.data.download_url),c.validateFields([e])):k.ZP.error(u.message),s.abrupt("return",!1);case 27:case"end":return s.stop()}}),s)})))};(0,r.useEffect)((function(){B.restTime>0&&(setTimeout((function(){B.restTime<=1||U({totalTime:B.totalTime,restTime:B.restTime-1})}),1e3),F("已上传 ".concat((100*(B.totalTime-B.restTime)/B.totalTime).toFixed(1),"%  预计剩余 ").concat(B.restTime," 秒")))}),[B.totalTime,B.restTime]);var K=function(e){I(Object.assign(Object.assign({},C),(0,Ve.Z)({},e,{error:""}))),c.setFieldValue(e,Y[e]),c.validateFields([e])},H=(0,r.useState)({pth_url:"",test_data:""}),Q=(0,d.Z)(H,2),Y=Q[0],R=Q[1],X=function(e){c.setFieldValue("sdk",e.sdk_default),R(Object.assign(Object.assign({},Y),{test_data:e.test_data_default})),c.setFieldValue("test_data",e.test_data_default),P(e.sdk_available)},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=null;return function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var i=arguments,c=this;n&&(clearTimeout(n),n=null),n=setTimeout((function(){e.apply(c,i),n=null}),t)}}((function(e,t){if("codebase"===t){var n=h.find((function(t){return t.name===e}));n&&X(n)}var a=c.getFieldsValue();a.codebase&&a.train_config_path&&$(a.codebase,a.train_config_path,(function(e){R(Object.assign(Object.assign({},Y),{pth_url:e})),c.setFieldValue("pth_url",e),c.validateFields(["pth_url"])}))}),500),$=function(e,t,n){return Ge(void 0,void 0,void 0,N().mark((function a(){var s;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ae(e,t).catch((function(e){return console.log(e)}));case 2:0===(s=a.sent).status&&n(s.data.pth_url);case 4:case"end":return a.stop()}}),a)})))},ee=(0,r.useState)(!1),ne=(0,d.Z)(ee,2),ae=ne[0],se=ne[1],re=(0,r.useState)(""),ie=(0,d.Z)(re,2),oe=ie[0],de=ie[1],ue=(0,r.useState)(!1),me=(0,d.Z)(ue,2),pe=me[0],he=me[1],fe=(0,r.useState)(""),ge=(0,d.Z)(fe,2),je=ge[0],xe=ge[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("section",Object.assign({className:Be},{children:[(0,s.jsx)("header",Object.assign({className:"add-task-convert-module--dA1zvAUe"},{children:(0,s.jsxs)(te.Z,{children:[(0,s.jsx)(te.Z.Item,{children:(0,s.jsx)(o.rU,Object.assign({to:"/task-convert-list"},{children:"模型转换"}))}),(0,s.jsx)(te.Z.Item,{children:"新建转换任务"})]})})),(0,s.jsx)("main",Object.assign({className:"add-task-convert-module--B54PAOts"},{children:(0,s.jsxs)(qe.Z,Object.assign({form:c,colon:!1,labelAlign:"left"},tt,{className:"add-task-convert-module--RbVtEkXi",initialValues:{dynamic_input:!1}},{children:[(0,s.jsx)("div",Object.assign({className:Ue},{children:"算法信息"})),(0,s.jsx)(qe.Z.Item,Object.assign({name:"codebase",label:"OpenMMLab 算法",rules:[{required:!0}]},{children:(0,s.jsx)(ce.Z,Object.assign({placeholder:"请选择",allowClear:!0,onChange:function(e){return G(e,"codebase")}},{children:h.map((function(e){return(0,s.jsx)($e,Object.assign({value:e.name},{children:e.name}),e.name)}))}))})),(0,s.jsx)(qe.Z.Item,Object.assign({name:"train_config_path",label:"模型训练配置",rules:[{required:!0}]},{children:(0,s.jsx)(w.Z,{placeholder:"例如 configs/resnet/resnet18_8xb32_in1k.py",onChange:function(e){return G(e,"train_config_path")}})})),(0,s.jsxs)(qe.Z.Item,Object.assign({label:"pth 获取路径",required:!0},{children:[(0,s.jsx)(qe.Z.Item,Object.assign({name:"pth_url",rules:[{required:!0,message:"请上传模型"},{validator:function(e,t,n){return C.pth_url.error?Promise.reject(new Error(C.pth_url.error)):Promise.resolve()}}],noStyle:!0},{children:(0,s.jsx)(et,{placeholder:"请上传模型",readOnly:!0,rows:2,style:{resize:"none"}})})),(0,s.jsx)(qe.Z.Item,Object.assign({noStyle:!0,shouldUpdate:function(e,t){return e.pth_url!==t.pth_url}},{children:function(e){var t=(0,e.getFieldValue)("pth_url"),n=t&&t!==Y.pth_url;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",Object.assign({style:{display:n?"block":"none"},className:"".concat(Qe," ").concat(Je),onClick:function(){return K("pth_url")}},{children:"删除"})),(0,s.jsx)(Le.Z,Object.assign({accept:nt.pth_url.accept.join(),showUploadList:!1,beforeUpload:function(e){return D("pth_url",e,"pth")}},{children:(0,s.jsx)("span",Object.assign({style:{display:n?"none":"block"},className:"".concat(Qe," ").concat(Je)},{children:"上传模型"}))}))]})}})),B.restTime>0&&(0,s.jsx)(qe.Z.Item,Object.assign({noStyle:!0},{children:(0,s.jsx)("span",Object.assign({className:Re},{children:M}))}))]})),(0,s.jsx)("div",Object.assign({className:Ue},{children:"部署参数"})),(0,s.jsx)(qe.Z.Item,Object.assign({name:"runtime",label:"目标 runtime",rules:[{required:!0}]},{children:(0,s.jsx)(ce.Z,Object.assign({onChange:function(e){var t=x.find((function(t){return t.name===e}));if(t){var n=t.enable_input_shape;!n&&c.setFieldValue("input_shape",""),xe(n?t.shape_tips:""),he(n)}},placeholder:"请选择",allowClear:!0},{children:x.map((function(e){return(0,s.jsx)($e,Object.assign({value:e.name},{children:e.name}),e.name)}))}))})),(0,s.jsxs)(qe.Z.Item,Object.assign({label:"input shape"},{children:[(0,s.jsx)(qe.Z.Item,Object.assign({name:"dynamic_input",valuePropName:"checked",noStyle:!0},{children:(0,s.jsx)(Fe.Z,{checkedChildren:"开",unCheckedChildren:"关"})})),(0,s.jsxs)(qe.Z.Item,Object.assign({noStyle:!0},{children:[(0,s.jsx)("span",Object.assign({className:De},{children:"动态 shape"})),(0,s.jsx)(we.Z,Object.assign({placement:"top",title:(0,s.jsx)("a",Object.assign({href:O.input_shape_explanation,target:"_blank",className:Ye},{children:"查看说明文档"}))},{children:(0,s.jsx)("span",{className:Ke})}))]})),(0,s.jsx)(qe.Z.Item,Object.assign({noStyle:!0,shouldUpdate:function(e,t){return e.runtime!==t.runtime}},{children:(0,s.jsx)(qe.Z.Item,Object.assign({name:"input_shape",noStyle:!0},{children:(0,s.jsx)(et,{readOnly:!pe,className:"add-task-convert-module--pW8oBide",placeholder:je,rows:3,style:{resize:"none"}})}))}))]})),(0,s.jsxs)(qe.Z.Item,Object.assign({label:"SDK 部署"},{children:[(0,s.jsx)(qe.Z.Item,Object.assign({name:"sdk",valuePropName:"checked",noStyle:!0},{children:(0,s.jsx)(Fe.Z,{checkedChildren:"开",unCheckedChildren:"关",disabled:!A})})),(0,s.jsxs)(qe.Z.Item,Object.assign({noStyle:!0},{children:[(0,s.jsx)("span",Object.assign({className:De},{children:"生成 SDK 包"})),(0,s.jsx)(we.Z,Object.assign({placement:"top",title:(0,s.jsx)("a",Object.assign({href:O.sdk_explanation,target:"_blank",className:Ye},{children:"查看说明文档"}))},{children:(0,s.jsx)("span",{className:Ke})}))]}))]})),(0,s.jsxs)(qe.Z.Item,Object.assign({label:"数据测试",required:!0},{children:[(0,s.jsx)(qe.Z.Item,Object.assign({name:"test_data",rules:[{required:!0,message:"请上传"},{validator:function(e,t,n){return C.test_data.error?Promise.reject(new Error(C.test_data.error)):Promise.resolve()}}],noStyle:!0},{children:(0,s.jsx)(et,{readOnly:!0,rows:2,style:{resize:"none"}})})),(0,s.jsx)(qe.Z.Item,Object.assign({noStyle:!0,shouldUpdate:function(e,t){return e.test_data!==t.test_data}},{children:function(e){var t=(0,e.getFieldValue)("test_data"),n=t&&t!==Y.test_data;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",Object.assign({style:{display:n?"block":"none"},className:"".concat(Qe," ").concat(Je),onClick:function(){return K("test_data")}},{children:"删除"})),(0,s.jsx)(Le.Z,Object.assign({accept:nt.test_data.accept.join(),showUploadList:!1,beforeUpload:function(e){return D("test_data",e,"testdata")}},{children:(0,s.jsx)("span",Object.assign({style:{display:n?"none":"block"},className:"".concat(Qe," ").concat(Je)},{children:"上传数据"}))}))]})}}))]})),(0,s.jsx)(qe.Z.Item,Object.assign({label:"自定义选项",name:"zdy",valuePropName:"checked"},{children:(0,s.jsx)(Fe.Z,{checkedChildren:"开",unCheckedChildren:"关"})})),(0,s.jsx)(qe.Z.Item,Object.assign({noStyle:!0,shouldUpdate:function(e,t){return e.zdy!==t.zdy}},{children:function(e){return(0,e.getFieldValue)("zdy")?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(qe.Z.Item,Object.assign({name:"codebase_url",label:"算法仓库地址"},{children:(0,s.jsx)(w.Z,{placeholder:"默认使用 OpenMMLab 系列算法，或输入个人 Folk 地址"})})),(0,s.jsx)(qe.Z.Item,Object.assign({name:"codebase_branch",label:"算法 branch"},{children:(0,s.jsx)(w.Z,{placeholder:"选填"})})),(0,s.jsx)(qe.Z.Item,Object.assign({name:"mmdeploy_url",label:"MMDeploy 仓库地址"},{children:(0,s.jsx)(w.Z,{placeholder:"默认使用 MMDeploy，或输入个人 Folk 地址"})})),(0,s.jsx)(qe.Z.Item,Object.assign({name:"mmdeploy_branch",label:"MMDeploy branch"},{children:(0,s.jsx)(w.Z,{placeholder:"选填"})})),(0,s.jsxs)(qe.Z.Item,Object.assign({label:"int8 量化数据"},{children:[(0,s.jsx)(qe.Z.Item,Object.assign({name:"int8_quant_data",noStyle:!0},{children:(0,s.jsx)(w.Z,{placeholder:"选填，填入量化数据 github repo 地址以开启 int8 量化"})})),(0,s.jsx)(qe.Z.Item,Object.assign({noStyle:!0},{children:(0,s.jsx)("span",Object.assign({className:Re},{children:"填写示例 ： https://github.com/nihui/imagenet-sample-images"}))}))]}))]}):""}})),(0,s.jsxs)(qe.Z.Item,Object.assign({wrapperCol:Object.assign(Object.assign({},tt.wrapperCol),{offset:5}),className:"test"},{children:[(0,s.jsx)("button",Object.assign({className:He,onClick:function(){c.validateFields().then((function(){return Ge(void 0,void 0,void 0,N().mark((function t(){var n,s,r;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=c.getFieldsValue()).userid=a,t.next=4,(i=n,J("v1/task/convert/verify",{method:"post",data:i})).catch((function(e){return console.log(e)}));case 4:if(-1!==(s=t.sent).status){t.next=8;break}return k.ZP.error(s.message),t.abrupt("return");case 8:return t.next=10,Ce(n).catch((function(e){return console.log(e)}));case 10:0===(r=t.sent).status?(k.ZP.info("任务提交成功"),e("/task-convert-list")):k.ZP.info(r.message);case 12:case"end":return t.stop()}var i}),t)})))}))}},{children:"提交任务"})),(0,s.jsx)("button",Object.assign({className:m()(He,"add-task-convert-module--rr_onRMu"),onClick:function(){var e,t=c.getFieldsValue();for(var n in t)void 0===t[n]&&(t[n]="");t.zdy=void 0;var a=JSON.stringify(t),s=String(Date.now()),r=null===(e=a.match(/\[".+"\]/g))||void 0===e?void 0:e[0];r&&(a=JSON.stringify(t).replace(r,s));var i="&nbsp;&nbsp;&nbsp;&nbsp;";a=a.replace(/{/,"{<br>".concat(i)).replace(/(.*)}/,"$1<br>}").replace(/,/g,",<br>".concat(i)),r&&(a=a.replace(s,r)),de(a),se(!0),console.log(c.getFieldsValue())}},{children:"查看部署配置"}))]}))]}))}))]})),(0,s.jsx)(ke.Z,Object.assign({title:"部署配置参数",open:ae,footer:null,onCancel:function(){return se(!1)},wrapClassName:"config-modal-wrap"},{children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:oe}})}))]})},st={display_flex:"task-profile-list-module--uS8Z_zrm",displayFlex:"task-profile-list-module--uS8Z_zrm",flexDirection_column:"task-profile-list-module--wtplyTVM",flexDirectionColumn:"task-profile-list-module--wtplyTVM",alignItems_center:"task-profile-list-module--z_uWfYgV",alignItemsCenter:"task-profile-list-module--z_uWfYgV",justifyContent_spaceBetween:"task-profile-list-module--b419cdo3",justifyContentSpaceBetween:"task-profile-list-module--b419cdo3","fd-ml24":"task-profile-list-module--Qtglb4JS",fdMl24:"task-profile-list-module--Qtglb4JS","mxzh-list":"task-profile-list-module--KbEiIdx7",mxzhList:"task-profile-list-module--KbEiIdx7","mxzh-list-header":"task-profile-list-module--u26i3qfP",mxzhListHeader:"task-profile-list-module--u26i3qfP","mxzh-list-main":"task-profile-list-module--Yu0YA9Mk",mxzhListMain:"task-profile-list-module--Yu0YA9Mk","rw-count":"task-profile-list-module--MVkUhatA",rwCount:"task-profile-list-module--MVkUhatA","icon-question":"task-profile-list-module--ReUFIbkn",iconQuestion:"task-profile-list-module--ReUFIbkn",zt:"task-profile-list-module--WSlRuPE0",success:"task-profile-list-module--sjicJLq3",processing:"task-profile-list-module--QKsbqPc3",fail:"task-profile-list-module--Ush_8ZsF",reconnecting:"task-profile-list-module--BvswHeTN",wait_in_queue:"task-profile-list-module--NSIKYq6g",waitInQueue:"task-profile-list-module--NSIKYq6g",sent:"task-profile-list-module--LsZljDUH",canceled:"task-profile-list-module--lvNrdHuc","fd-button":"task-profile-list-module--wfkEqgX6",fdButton:"task-profile-list-module--wfkEqgX6","fd-a":"task-profile-list-module--tyl4VWos",fdA:"task-profile-list-module--tyl4VWos",error:"task-profile-list-module--qTUqHHC9",disabled:"task-profile-list-module--NMIuEbuQ","fd-pos-r":"task-profile-list-module--Ux7cimbN",fdPosR:"task-profile-list-module--Ux7cimbN","fd-link":"task-profile-list-module--BCg0ogu4",fdLink:"task-profile-list-module--BCg0ogu4","fd-empty-text":"task-profile-list-module--_hDGMOSq",fdEmptyText:"task-profile-list-module--_hDGMOSq"},rt=function(e,t,n,a){return new(n||(n=Promise))((function(s,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))},it=ke.Z.confirm,ct=function(){var e=(0,l.s0)(),t=(0,r.useState)(q()),n=(0,d.Z)(t,2),a=n[0],i=(n[1],(0,r.useState)({tasks:[],amount:0})),c=(0,d.Z)(i,2),o=c[0],u=c[1],m=function(){return e("/add-task-profile")},p=(0,r.useState)(!1),h=(0,d.Z)(p,2),f=h[0],g=h[1],j=(0,r.useState)(""),x=(0,d.Z)(j,2),v=x[0],b=x[1],_={5:"success",6:"fail",3:"processing",1:"reconnecting",4:"canceled",0:"wait_in_queue",2:"sent"},w=[{title:"编号",width:140,render:function(e,t,n){return(0,s.jsxs)("div",{children:[n+1+(y.page_num-1)*y.per_page,(0,s.jsx)("a",Object.assign({className:"".concat(st.fdA," ").concat(st.fdMl24),onClick:function(){return function(e){return rt(void 0,void 0,void 0,N().mark((function t(){var n,s,r,i,c,o,l;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se(a,e.id).catch((function(e){return console.log(e)}));case 2:0===(s=t.sent).status&&(r=s.data,i=JSON.stringify(r),c=String(Date.now()),(o=null===(n=i.match(/"{.+}"/g))||void 0===n?void 0:n[0])&&(i=JSON.stringify(r).replace(o,c)),l="&nbsp;&nbsp;&nbsp;&nbsp;",i=i.replace(/{/g,"{<br>".concat(l)).replace(/}/g,"<br>}").replace(/,/g,",<br>".concat(l)),o&&(i=i.replace(c,o)),b(i),g(!0));case 4:case"end":return t.stop()}}),t)})))}(t)}},{children:"查看参数"}))]})}},{title:"目标设备",width:337,dataIndex:"device_name"},{title:"状态",width:139,render:function(e,t,n){return(0,s.jsxs)("div",Object.assign({className:"".concat(st.display_flex," ").concat(st.alignItems_center)},{children:[(0,s.jsx)("span",{className:"".concat(st.zt," ").concat(st[_[t.state_code]])}),(0,s.jsx)("span",{children:t.state_text})]}))}},{title:"创建时间",width:180,dataIndex:"create_time"},{title:"执行时间",width:140,dataIndex:"execute_time",render:function(e,t,n){return t.execute_time?t.execute_time:"-"}},{title:"操作",width:200,render:function(e,t,n){var r;return t.operation_enable?t.download_report_enable?r=(0,s.jsx)("a",Object.assign({className:st.fdA,onClick:function(){return function(e){window.open(e.download_report_url)}(t)}},{children:"查看测速报告"})):t.download_error_enable?r=(0,s.jsx)("a",Object.assign({className:st.fdA,onClick:function(){return function(e){window.open(e.download_error_url)}(t)}},{children:"错误日志"})):t.cancel_enable&&(r=(0,s.jsx)("a",Object.assign({className:"".concat(st.fdA," ").concat(st.error),onClick:function(){return function(e){return rt(void 0,void 0,void 0,N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:it({className:"fd-confirm_cancel",title:(0,s.jsx)("span",Object.assign({className:""},{children:"确定要取消此任务吗？"})),icon:"",content:"取消后任务将不可恢复",cancelText:"暂不取消",okText:"取消",onOk:function(){var t,n;t=e.id,n=function(){k.ZP.info("任务取消成功"),A(),P()},rt(void 0,void 0,void 0,N().mark((function e(){var s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(a,t).catch((function(e){return console.log(e)}));case 2:0===(s=e.sent).status?n():k.ZP.error(s.message);case 4:case"end":return e.stop()}}),e)})))},onCancel:function(){console.log("Cancel")}});case 1:case"end":return t.stop()}}),t)})))}(t)}},{children:"取消"}))):r=(0,s.jsx)("a",Object.assign({className:"".concat(st.fdA," ").concat(st.disabled)},{children:"-"})),r}}],O=(0,r.useState)({page_num:1,per_page:10}),Z=(0,d.Z)(O,2),y=Z[0],S=Z[1],C=(0,r.useState)({max:4,use:3,available:1}),I=(0,d.Z)(C,2),T=I[0],E=I[1],A=function(){return rt(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(a).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&E(t.data);case 4:case"end":return e.stop()}}),e)})))};(0,r.useEffect)((function(){A()}),[]);var P=function(){return rt(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(y.page_num,y.per_page,a).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&u(t.data);case 4:case"end":return e.stop()}}),e)})))};return(0,r.useEffect)((function(){P()}),[y.page_num,y.per_page]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("section",Object.assign({className:st.mxzhList},{children:[(0,s.jsxs)("header",Object.assign({className:st.mxzhListHeader},{children:["模型测速",(0,s.jsxs)("div",Object.assign({className:"".concat(st.display_flex," ").concat(st.alignItems_center)},{children:[(0,s.jsxs)("span",Object.assign({className:st.rwCount},{children:["进行中任务",T.use,"/",T.max]})),(0,s.jsx)(we.Z,Object.assign({placement:"top",title:"仅允许同时提交 ".concat(T.max," 个转换或测速任务，当前 ").concat(T.use," 个；可取消等待中任务空出额度")},{children:(0,s.jsx)("span",{className:st.iconQuestion})})),(0,s.jsx)("button",Object.assign({disabled:T.max===T.use,className:"".concat(st.fdButton," ").concat(st.fdMl24),onClick:m},{children:"新建测速任务"}))]}))]})),(0,s.jsx)("main",Object.assign({className:st.mxzhListMain},{children:(0,s.jsx)("div",Object.assign({className:st.fdPosR},{children:(0,s.jsx)(xe.Z,{rowKey:"id",locale:{emptyText:(0,s.jsxs)("div",Object.assign({className:st.fdEmptyText},{children:["还未提交过测速任务，快去 ",(0,s.jsx)("a",Object.assign({className:st.fdA,onClick:m},{children:"新建"}))," 吧"]}))},dataSource:o.tasks,columns:w,pagination:{current:y.page_num,pageSize:y.per_page,total:o.amount,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(e,t){S({page_num:e,per_page:t})}},scroll:{y:550}})}))}))]})),(0,s.jsx)(ke.Z,Object.assign({title:"任务参数",open:f,footer:null,onCancel:function(){return g(!1)},wrapClassName:"config-modal-wrap"},{children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:v}})}))]})},ot=(n(76616),n(9676)),lt="add-task-profile-module--C0evISH5",dt="add-task-profile-module--OtfrOBky",ut="add-task-profile-module--eOKaV5gS",mt="add-task-profile-module--AueMpZkI",pt=function(e,t,n,a){return new(n||(n=Promise))((function(s,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))},ht=ce.Z.Option,ft=w.Z.TextArea,gt={labelCol:{span:5},wrapperCol:{span:19}},jt={sdk_url:{accept:[".zip"],size:400},test_data:{accept:[".jpg",".png",".yuv",".bmp",".npy",".bin",".mp4",".avi"],size:10}},xt=function(){var e=(0,l.s0)(),t=qe.Z.useForm(),n=(0,d.Z)(t,1)[0],a=(0,r.useState)([]),i=(0,d.Z)(a,2),c=i[0],u=i[1],m=(0,r.useState)([]),p=(0,d.Z)(m,2),h=p[0],f=p[1],g=(0,r.useState)(q()),j=(0,d.Z)(g,2),x=j[0],v=(j[1],(0,r.useState)("")),b=(0,d.Z)(v,2),_=b[0],O=b[1];(0,r.useEffect)((function(){pt(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee().catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&u(t.data);case 4:case"end":return e.stop()}}),e)}))),pt(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("v1/device/list/profile",{}).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&f(t.data);case 4:case"end":return e.stop()}}),e)}))),pt(void 0,void 0,void 0,N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(x).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&D(t.data);case 4:case"end":return e.stop()}}),e)})))}),[]);var Z=(0,r.useState)({sdk_url:{error:""},test_data:{error:""}}),y=(0,d.Z)(Z,2),S=y[0],C=y[1],I=(0,r.useState)({totalTime:0,restTime:0}),T=(0,d.Z)(I,2),E=T[0],A=T[1],P=function(e,t,a){return pt(void 0,void 0,void 0,N().mark((function s(){var r,i,c,o,l,d;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if("sdk_url"!==e){s.next=12;break}return s.next=3,Xe().catch((function(e){return console.log(e)}));case 3:if(0!==(r=s.sent).status){s.next=10;break}i=r.data.upload_bytes_per_second,c=Number((t.size/i).toFixed(0)),A({totalTime:c,restTime:c}),s.next=12;break;case 10:return k.ZP.error(r.message),s.abrupt("return");case 12:if(o=jt[e].size,!(t.size>1024*o*1024)){s.next=17;break}return C(Object.assign(Object.assign({},S),(0,Ve.Z)({},e,{error:"文件大小超过".concat(o,"M")}))),n.validateFields([e]),s.abrupt("return",!1);case 17:return(l=new FormData).append("userid",x),l.append(a,t),l.append("bytesize",t.size.toString()),s.next=23,Pe(a,l).catch((function(e){return console.log(e)}));case 23:return d=s.sent,"sdk_url"===e&&A({totalTime:0,restTime:0}),0===d.status?(n.setFieldValue(e,d.data.download_url),n.validateFields([e])):k.ZP.error(d.message),s.abrupt("return",!1);case 27:case"end":return s.stop()}}),s)})))},W=(0,r.useState)({test_data:""}),z=(0,d.Z)(W,2),M=z[0],F=z[1],L=function(e){C(Object.assign(Object.assign({},S),(0,Ve.Z)({},e,{error:""}))),n.setFieldValue(e,M[e]),n.validateFields([e])},V=(0,r.useState)({max:4,use:0,available:4}),B=(0,d.Z)(V,2),U=B[0],D=B[1],K=qe.Z.useWatch("devices",n);return(0,r.useEffect)((function(){E.restTime>0&&(setTimeout((function(){E.restTime<=1||A({totalTime:E.totalTime,restTime:E.restTime-1})}),1e3),O("已上传 ".concat((100*(E.totalTime-E.restTime)/E.totalTime).toFixed(1),"%  预计剩余 ").concat(E.restTime," 秒")))}),[E.totalTime,E.restTime]),(0,s.jsxs)("section",Object.assign({className:"add-task-profile-module--VuomgYWl"},{children:[(0,s.jsx)("header",Object.assign({className:"add-task-profile-module--hIxPos37"},{children:(0,s.jsxs)(te.Z,{children:[(0,s.jsx)(te.Z.Item,{children:(0,s.jsx)(o.rU,Object.assign({to:"/task-profile-list"},{children:"模型转换"}))}),(0,s.jsx)(te.Z.Item,{children:"新建测速任务"})]})})),(0,s.jsx)("main",Object.assign({className:"add-task-profile-module--fWF2ydjY"},{children:(0,s.jsxs)(qe.Z,Object.assign({form:n,colon:!1,labelAlign:"left"},gt,{className:"add-task-profile-module--hmYVIoLr"},{children:[(0,s.jsx)("div",Object.assign({className:lt},{children:"任务描述"})),(0,s.jsx)(qe.Z.Item,Object.assign({name:"codebase",label:"OpenMMLab 算法",rules:[{required:!0}]},{children:(0,s.jsx)(ce.Z,Object.assign({placeholder:"请选择",allowClear:!0,onChange:function(e){var t=c.find((function(t){return t.name===e}));t&&function(e){F({test_data:e.test_data_default}),n.setFieldValue("test_data",e.test_data_default),n.validateFields(["test_data"])}(t)}},{children:c.map((function(e){return(0,s.jsx)(ht,Object.assign({value:e.name},{children:e.name}),e.name)}))}))})),(0,s.jsxs)(qe.Z.Item,Object.assign({label:"SDK"},{children:[(0,s.jsx)(qe.Z.Item,Object.assign({name:"sdk_url",rules:[{validator:function(e,t,n){return S.sdk_url.error?Promise.reject(new Error(S.sdk_url.error)):Promise.resolve()}}],noStyle:!0},{children:(0,s.jsx)(w.Z,{placeholder:"请输入下载路径或上传 SDK 包"})})),(0,s.jsx)(qe.Z.Item,Object.assign({noStyle:!0,shouldUpdate:function(e,t){return e.sdk_url!==t.sdk_url}},{children:function(e){var t=(0,e.getFieldValue)("sdk_url");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",Object.assign({style:{display:t?"block":"none"},className:"".concat(dt," ").concat(ut),onClick:function(){return L("sdk_url")}},{children:"删除"})),(0,s.jsx)(Le.Z,Object.assign({accept:jt.sdk_url.accept.join(),showUploadList:!1,beforeUpload:function(e){return P("sdk_url",e,"zip")}},{children:(0,s.jsx)("span",Object.assign({style:{display:t?"none":"block"},className:"".concat(dt," ").concat(ut)},{children:"上传SDK"}))}))]})}})),E.restTime>0&&(0,s.jsx)(qe.Z.Item,Object.assign({noStyle:!0},{children:(0,s.jsx)("span",Object.assign({className:mt},{children:_}))}))]})),(0,s.jsxs)(qe.Z.Item,Object.assign({label:"数据测试",required:!0},{children:[(0,s.jsx)(qe.Z.Item,Object.assign({name:"test_data",rules:[{required:!0,message:"请上传"},{validator:function(e,t,n){return S.test_data.error?Promise.reject(new Error(S.test_data.error)):Promise.resolve()}}],noStyle:!0},{children:(0,s.jsx)(ft,{readOnly:!0,rows:2,style:{resize:"none"}})})),(0,s.jsx)(qe.Z.Item,Object.assign({noStyle:!0,shouldUpdate:function(e,t){return e.test_data!==t.test_data}},{children:function(e){var t=(0,e.getFieldValue)("test_data"),n=t&&t!==M.test_data;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",Object.assign({style:{display:n?"block":"none"},className:"".concat(dt," ").concat(ut),onClick:function(){return L("test_data")}},{children:"删除"})),(0,s.jsx)(Le.Z,Object.assign({accept:jt.test_data.accept.join(),showUploadList:!1,beforeUpload:function(e){return P("test_data",e,"testdata")}},{children:(0,s.jsx)("span",Object.assign({style:{display:n?"none":"block"},className:"".concat(dt," ").concat(ut)},{children:"上传数据"}))}))]})}}))]})),(0,s.jsx)("div",Object.assign({className:lt},{children:"执行设备"})),(0,s.jsxs)(qe.Z.Item,Object.assign({label:"测速设备",required:!0},{children:[(0,s.jsx)(qe.Z.Item,Object.assign({name:"devices",rules:[{required:!0,message:"请选择设备"}],noStyle:!0},{children:(0,s.jsx)(ce.Z,Object.assign({mode:"multiple",maxTagCount:"responsive",placeholder:"请选择",optionLabelProp:"label",maxTagPlaceholder:function(e){return"+".concat(e.length)},allowClear:!0},{children:h.map((function(e){return(0,s.jsxs)(ht,Object.assign({disabled:(null==K?void 0:K.length)>=U.available&&!(null==K?void 0:K.includes(e.devid)),label:e.text,value:e.devid},{children:[(0,s.jsx)(ot.Z,{disabled:(null==K?void 0:K.length)>=U.available&&!(null==K?void 0:K.includes(e.devid)),checked:null==K?void 0:K.includes(e.devid)}),(0,s.jsx)("span",Object.assign({className:"add-task-profile-module--DKdEXJ7Q"},{children:e.text}))]}),e.devid)}))}))})),(0,s.jsxs)(qe.Z.Item,Object.assign({noStyle:!0},{children:[(0,s.jsx)("span",Object.assign({className:mt},{children:"可选择多个测试设备进行测试，每个任务独立计算额度"})),(0,s.jsx)(we.Z,Object.assign({placement:"top",title:(0,s.jsxs)("span",{children:["仅允许同时提交 4 个转换或测速任务，当前 ",U.available," 个；可取消等待中任务空出额度"]})},{children:(0,s.jsx)("span",{className:"add-task-profile-module--DsRWJ60_"})}))]}))]})),(0,s.jsx)(qe.Z.Item,Object.assign({wrapperCol:Object.assign(Object.assign({},gt.wrapperCol),{offset:5})},{children:(0,s.jsx)("button",Object.assign({className:"add-task-profile-module--seyKy56O",onClick:function(){n.validateFields().then((function(){return pt(void 0,void 0,void 0,N().mark((function t(){var a,s;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.getFieldsValue()).userid=x,t.next=4,(r=a,J("v1/task/profile/submit",{method:"post",data:r})).catch((function(e){return console.log(e)}));case 4:0===(s=t.sent).status?(k.ZP.info("任务提交成功"),e("/task-profile-list")):k.ZP.error(s.message);case 6:case"end":return t.stop()}var r}),t)})))}))}},{children:"提交任务"}))}))]}))}))]}))},vt={"critic-wrap":"critic-module--ocVihMt9",criticWrap:"critic-module--ocVihMt9","critic-header":"critic-module--CKyqAgBq",criticHeader:"critic-module--CKyqAgBq","critic-main":"critic-module--ZH7SW6uX",criticMain:"critic-module--ZH7SW6uX","critic-item":"critic-module--iNDlieBd",criticItem:"critic-module--iNDlieBd",name:"critic-module--ksl7aU7f",img:"critic-module--uHJs8pjI",tags:"critic-module--blsmGlrM",description:"critic-module--rcJm495d"},bt=function(){var e=(0,r.useState)([]),t=(0,d.Z)(e,2),n=t[0],a=t[1],i=n.map((function(e,t){return(0,s.jsxs)("div",Object.assign({className:vt.criticItem,"data-url":e.click_url},{children:[(0,s.jsx)("img",{className:vt.img,src:e.header_url}),(0,s.jsxs)("div",Object.assign({className:vt.textWrap},{children:[(0,s.jsx)("span",Object.assign({className:vt.name},{children:e.title})),(0,s.jsx)("ul",Object.assign({className:vt.tags},{children:e.tags.map((function(e,n){return(0,s.jsx)("li",{children:e},"tag-".concat(t,"-").concat(n))}))})),(0,s.jsx)("div",Object.assign({className:vt.description},{children:e.brief}))]}))]}),"card".concat(t))}));return(0,r.useEffect)((function(){var e,t,n,s;e=void 0,t=void 0,n=void 0,s=N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("v1/critic/list",{}).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&a(t.data);case 4:case"end":return e.stop()}}),e)})),new(n||(n=Promise))((function(a,r){function i(e){try{o(s.next(e))}catch(e){r(e)}}function c(e){try{o(s.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((s=s.apply(e,t||[])).next())}))}),[]),(0,s.jsxs)("section",Object.assign({className:vt.criticWrap},{children:[(0,s.jsx)("header",Object.assign({className:vt.criticHeader},{children:"硬件测评报告"})),(0,s.jsx)("main",Object.assign({className:vt.criticMain},{children:(0,s.jsx)("div",Object.assign({onClick:function(e){for(var t=e.target;t;){var n=t.dataset.url;if(n){window.open(n,"_blank");break}t=t.parentElement}}},{children:i}))}))]}))},_t=(n(69177),n(29752)),wt={"statistic-wrap":"statistic-module--kUM9qt05",statisticWrap:"statistic-module--kUM9qt05","statistic-header":"statistic-module--c1zQEdBL",statisticHeader:"statistic-module--c1zQEdBL",title:"statistic-module--_vfwIeXV","statistic-item":"statistic-module--TgLl98PX",statisticItem:"statistic-module--TgLl98PX",label:"statistic-module--Tn7tuoTA",num:"statistic-module--wqaQZhZK","statistic-main":"statistic-module--IEoG4hmU",statisticMain:"statistic-module--IEoG4hmU","statistic-title":"statistic-module--_5NMlVgN",statisticTitle:"statistic-module--_5NMlVgN","statistic-list":"statistic-module--mS7WZJiD",statisticList:"statistic-module--mS7WZJiD",type:"statistic-module--CgtyOtg9",top20:"statistic-module--N1anwLu2",top5:"statistic-module--NrlrZ5oT"},kt=function(){var e=[{title:"排名",width:100,render:function(e,t,n){return(0,s.jsx)("span",Object.assign({className:"index-number-".concat(n+1)},{children:n+1}))}},{title:"模型",width:183,dataIndex:"name"},{title:"下载数",width:181,render:function(e){return(0,s.jsx)(_t.Z,{value:e.download})}}],t=[{title:"排名",width:100,render:function(e,t,n){return(0,s.jsx)("span",Object.assign({className:"index-number-".concat(n+1)},{children:n+1}))}},{title:"设备",width:183,dataIndex:"name"},{title:"使用数",width:181,render:function(e){return(0,s.jsx)(_t.Z,{value:e.count})}}],n=(0,r.useState)({user:{key:0,login:0,enrolment:0},model:{onnx:0,hardware:0,download:0,top20:[]},device:{amount:0,top5:[]},task:{modelconvert:0,profilespeed:0}}),a=(0,d.Z)(n,2),i=a[0],c=a[1];(0,r.useEffect)((function(){var e,t,n,a;o(),window.addEventListener("resize",V(o)),e=void 0,t=void 0,n=void 0,a=N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("v1/statistic/get",{}).catch((function(e){return console.log(e)}));case 2:0===(t=e.sent).status&&(t.data.device.top5.forEach((function(e,t){return e.key="device-".concat(t)})),c(t.data));case 4:case"end":return e.stop()}}),e)})),new(n||(n=Promise))((function(s,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))}),[]);var o=function(){var e=document.documentElement.getBoundingClientRect().height-440;document.querySelectorAll(".ant-table-body").forEach((function(t){t.style.maxHeight="".concat(e,"px"),t.style.height="".concat(e,"px")}))};return(0,s.jsxs)("section",Object.assign({className:wt.statisticWrap},{children:[(0,s.jsxs)("header",Object.assign({className:wt.statisticHeader},{children:[(0,s.jsx)("span",Object.assign({className:wt.title},{children:"运行统计"})),(0,s.jsxs)("div",Object.assign({className:wt.statistic},{children:[(0,s.jsxs)("div",Object.assign({className:wt.statisticItem},{children:[(0,s.jsx)("span",Object.assign({className:wt.label},{children:"访问量"})),(0,s.jsx)(_t.Z,{className:wt.num,value:i.user.login})]})),(0,s.jsxs)("div",Object.assign({className:wt.statisticItem},{children:[(0,s.jsx)("span",Object.assign({className:wt.label},{children:"登录用户"})),(0,s.jsx)(_t.Z,{className:wt.num,value:i.user.enrolment})]}))]}))]})),(0,s.jsxs)("main",Object.assign({className:wt.statisticMain},{children:[(0,s.jsxs)("div",Object.assign({className:wt.statisticItem},{children:[(0,s.jsx)("span",Object.assign({className:wt.statisticTitle},{children:"模型统计"})),(0,s.jsxs)("div",Object.assign({className:wt.statisticList},{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(_t.Z,{className:wt.num,value:i.model.onnx}),(0,s.jsx)("span",Object.assign({className:wt.type},{children:"通用模型总数"}))]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(_t.Z,{className:wt.num,value:i.model.hardware}),(0,s.jsx)("span",Object.assign({className:wt.type},{children:"设备模型整数"}))]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(_t.Z,{className:wt.num,value:i.model.download}),(0,s.jsx)("span",Object.assign({className:wt.type},{children:"累计下载次数"}))]})]})),(0,s.jsx)("div",{className:wt.top20}),(0,s.jsx)(xe.Z,{className:"scroll-table",dataSource:i.model.top20,columns:e,pagination:!1,scroll:{y:0}})]})),(0,s.jsxs)("div",Object.assign({className:wt.statisticItem},{children:[(0,s.jsx)("span",Object.assign({className:wt.statisticTitle},{children:"设备统计"})),(0,s.jsxs)("div",Object.assign({className:wt.statisticList},{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(_t.Z,{className:wt.num,value:i.device.amount}),(0,s.jsx)("span",Object.assign({className:wt.type},{children:"注册设备总数"}))]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(_t.Z,{className:wt.num,value:i.task.modelconvert}),(0,s.jsx)("span",Object.assign({className:wt.type},{children:"累计转换任务"}))]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(_t.Z,{className:wt.num,value:i.task.profilespeed}),(0,s.jsx)("span",Object.assign({className:wt.type},{children:"累计测试任务"}))]})]})),(0,s.jsx)("div",{className:wt.top5}),(0,s.jsx)(xe.Z,{className:"scroll-table",dataSource:i.device.top5,columns:t,pagination:!1,scroll:{y:0}})]}))]}))]}))},Ot=function(){return(0,s.jsx)(o.VK,{children:(0,s.jsx)(l.Z5,{children:(0,s.jsxs)(l.AW,Object.assign({path:"/",element:(0,s.jsx)(f,{})},{children:[(0,s.jsx)(l.AW,{index:!0,element:(0,s.jsx)(ee,{})}),(0,s.jsx)(l.AW,{path:"great",element:(0,s.jsx)(j,{})}),(0,s.jsx)(l.AW,{path:"hello",element:(0,s.jsx)(v,{})}),(0,s.jsx)(l.AW,{path:"hi",element:(0,s.jsx)(b,{})}),(0,s.jsx)(l.AW,{path:"onnx-list",element:(0,s.jsx)(ee,{})}),(0,s.jsx)(l.AW,{path:"onnx-detail",element:(0,s.jsx)(ie,{})}),(0,s.jsx)(l.AW,{path:"hardware-list",element:(0,s.jsx)(me,{})}),(0,s.jsx)(l.AW,{path:"hardware-detail",element:(0,s.jsx)(je,{})}),(0,s.jsx)(l.AW,{path:"device-list",element:(0,s.jsx)(_e,{})}),(0,s.jsx)(l.AW,{path:"task-convert-list",element:(0,s.jsx)(Me,{})}),(0,s.jsx)(l.AW,{path:"add-task-convert",element:(0,s.jsx)(at,{})}),(0,s.jsx)(l.AW,{path:"task-profile-list",element:(0,s.jsx)(ct,{})}),(0,s.jsx)(l.AW,{path:"add-task-profile",element:(0,s.jsx)(xt,{})}),(0,s.jsx)(l.AW,{path:"critic",element:(0,s.jsx)(bt,{})}),(0,s.jsx)(l.AW,{path:"statistic",element:(0,s.jsx)(kt,{})}),(0,s.jsx)(l.AW,{path:"*",element:(0,s.jsx)("main",{children:(0,s.jsx)("p",{children:"There is nothing here!"})})})]}))})})},Nt=n(29558),Zt={"zh-CN":Object.assign({},{welcome:"欢迎，感恩",hello:"嗨",hi:"你好"}),"en-US":Object.assign({},{welcome:"welcome , go to great",hello:"hello",hi:"hi"})},yt=r.createContext((function(e){console.log(e)})),St=function(e){var t=e.children,n=(0,r.useState)(L),a=(0,d.Z)(n,2),i=a[0],c=a[1],o=(0,r.useCallback)((function(e){c(e),function(e){L=function(e){return window.localStorage.setItem(F,e),e}(e)}(e)}),[]);return(0,s.jsx)(Nt.Z,Object.assign({locale:i,messages:Zt[i]},{children:(0,s.jsx)(yt.Provider,Object.assign({value:o},{children:t}))}))},Ct=n(80787);i.render((0,s.jsx)((function(){return(0,s.jsx)(c.ZP,Object.assign({locale:Ct.Z},{children:(0,s.jsx)(St,{children:(0,s.jsx)("div",Object.assign({className:"app"},{children:(0,s.jsx)(Ot,{})}))})}))}),{}),document.getElementById("app"))},24654:function(){}},function(e){e.O(0,[24,423],(function(){return 39652,e(e.s=39652)})),e.O()}]);